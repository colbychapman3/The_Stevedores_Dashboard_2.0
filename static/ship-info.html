<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ship Information Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .progress-ring {
            transform: rotate(-90deg);
        }
        .progress-ring-circle {
            transition: stroke-dasharray 0.35s;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
        .photo-upload-zone {
            border: 2px dashed #cbd5e0;
            transition: all 0.3s ease;
        }
        .photo-upload-zone:hover {
            border-color: #4299e1;
            background-color: #ebf8ff;
        }
        .photo-upload-zone.dragover {
            border-color: #3182ce;
            background-color: #bee3f8;
        }
        .deck-complete {
            background: linear-gradient(90deg, #10b981, #34d399);
            color: white;
        }
        .metric-card {
            transition: transform 0.2s ease-in-out;
        }
        .metric-card:hover {
            transform: translateY(-2px);
        }
        .widget-container {
            position: relative;
        }
        .widget-handle {
            position: absolute;
            top: 5px;
            right: 5px;
            cursor: move;
            background: rgba(0,0,0,0.1);
            border-radius: 4px;
            padding: 4px;
            opacity: 0;
            transition: opacity 0.2s;
        }
        .widget-container:hover .widget-handle {
            opacity: 1;
        }
        .widget-dragging {
            opacity: 0.7;
            transform: rotate(2deg) scale(1.02);
            z-index: 1000;
            transition: none;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
        .widget-drop-zone {
            border: 2px dashed #3b82f6;
            background-color: rgba(59, 130, 246, 0.1);
        }
        .widget-controls {
            position: absolute;
            top: 5px;
            left: 5px;
            opacity: 0;
            transition: opacity 0.2s;
        }
        .widget-container:hover .widget-controls {
            opacity: 1;
        }
        .widget-disabled {
            opacity: 0.5;
            pointer-events: none;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-lg border-b-4 border-blue-600">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4 lg:py-6">
                <div class="flex items-center">
                    <button onclick="goBack()" class="mr-2 lg:mr-4 p-2 text-gray-600 hover:text-blue-600 transition duration-200">
                        <i class="fas fa-arrow-left text-xl lg:text-2xl"></i>
                    </button>
                    <div>
                        <h1 id="vesselTitle" class="text-xl lg:text-3xl font-bold text-gray-900">Ship Information Dashboard</h1>
                        <p class="text-sm lg:text-base text-gray-600 hidden sm:block">Comprehensive Analytics & Operations Management</p>
                    </div>
                </div>
                <div class="flex flex-wrap items-center gap-2">
                    <button onclick="toggleCustomizeMode()" id="customizeBtn" class="bg-indigo-600 hover:bg-indigo-700 text-white px-2 py-1 sm:px-4 sm:py-2 rounded-lg font-semibold transition duration-200 text-xs sm:text-sm">
                        <i class="fas fa-cog sm:mr-2"></i><span class="hidden sm:inline"> Customize</span>
                    </button>
                    <button onclick="generateReport()" class="bg-purple-600 hover:bg-purple-700 text-white px-2 py-1 sm:px-4 sm:py-2 rounded-lg font-semibold transition duration-200 text-xs sm:text-sm">
                        <i class="fas fa-file-pdf sm:mr-2"></i><span class="hidden sm:inline"> Report</span>
                    </button>
                    <button onclick="testAllWidgetFunctions()" class="bg-orange-600 hover:bg-orange-700 text-white px-2 py-1 sm:px-4 sm:py-2 rounded-lg font-semibold transition duration-200 text-xs sm:text-sm">
                        <i class="fas fa-bug sm:mr-2"></i><span class="hidden sm:inline"> Test</span>
                    </button>
                    <button onclick="updateProgress()" class="bg-green-600 hover:bg-green-700 text-white px-2 py-1 sm:px-4 sm:py-2 rounded-lg font-semibold transition duration-200 text-xs sm:text-sm">
                        <i class="fas fa-edit sm:mr-2"></i><span class="hidden sm:inline"> Update</span>
                    </button>
                    <button onclick="goToMaster()" class="bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 sm:px-4 sm:py-2 rounded-lg font-semibold transition duration-200 text-xs sm:text-sm">
                        <i class="fas fa-tachometer-alt sm:mr-2"></i><span class="hidden sm:inline"> Master</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Key Metrics Overview -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="bg-white rounded-xl shadow-lg p-6 metric-card">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">Current Rate</p>
                        <p class="text-2xl font-bold text-blue-600"><span id="currentRateValue">0</span></p>
                        <p class="text-xs text-gray-500">cars/hour</p>
                    </div>
                    <div class="bg-blue-100 p-3 rounded-full">
                        <i class="fas fa-tachometer-alt text-blue-600"></i>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-xl shadow-lg p-6 metric-card">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">Completion</p>
                        <p class="text-2xl font-bold text-green-600" id="completionValue">0%</p>
                        <p class="text-xs text-gray-500">of operation</p>
                    </div>
                    <div class="bg-green-100 p-3 rounded-full">
                        <i class="fas fa-percentage text-green-600"></i>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-xl shadow-lg p-6 metric-card">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">ETC</p>
                        <p class="text-2xl font-bold text-orange-600" id="etcDisplay">--:--</p>
                        <p class="text-xs text-gray-500">estimated completion</p>
                    </div>
                    <div class="bg-orange-100 p-3 rounded-full">
                        <i class="fas fa-clock text-orange-600"></i>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-xl shadow-lg p-6 metric-card">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">Elapsed Time</p>
                        <p class="text-2xl font-bold text-purple-600" id="elapsedTimeDisplay">0:00</p>
                        <p class="text-xs text-gray-500">hours:minutes</p>
                    </div>
                    <div class="bg-purple-100 p-3 rounded-full">
                        <i class="fas fa-stopwatch text-purple-600"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- Real-time Progress Update Section -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
            <h2 class="text-xl font-bold text-gray-900 mb-4 flex items-center">
                <i class="fas fa-chart-line text-green-600 mr-3"></i>Real-time Operations Control
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Vehicles Discharged</label>
                    <input type="number" id="dischargedCount" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-transparent" 
                           placeholder="Enter count" onchange="updateRealTimeProgress()" min="0">
                    <p class="text-xs text-gray-500 mt-1">Total: <span id="totalVehicles">0</span></p>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Current Deck</label>
                    <select id="currentDeck" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent" onchange="updateRealTimeProgress()">
                        <option value="1">Deck 1</option>
                        <option value="2">Deck 2</option>
                        <option value="3">Deck 3</option>
                        <option value="4">Deck 4</option>
                        <option value="5">Deck 5</option>
                        <option value="6">Deck 6</option>
                        <option value="7">Deck 7</option>
                        <option value="8">Deck 8</option>
                        <option value="9">Deck 9</option>
                        <option value="10">Deck 10</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Active Drivers</label>
                    <input type="number" id="activeDrivers" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-purple-500 focus:border-transparent" 
                           placeholder="Enter count" onchange="updateRealTimeProgress()" min="0">
                    <p class="text-xs text-gray-500 mt-1">Available: <span id="totalDrivers">0</span></p>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Operation Status</label>
                    <select id="operationStatus" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-transparent" onchange="updateRealTimeProgress()">
                        <option value="active">Active</option>
                        <option value="loading">Loading</option>
                        <option value="discharge">Discharge</option>
                        <option value="break">Break</option>
                        <option value="paused">Paused</option>
                        <option value="complete">Complete</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Customizable Widgets Container -->
        <div id="widgetsContainer" class="space-y-6 mb-8">
            <!-- Widget 1: Hourly Productivity Analysis -->
            <div class="widget-container" data-widget-id="hourly-productivity" data-widget-size="large">
                <div class="widget-controls">
                    <button onclick="toggleWidget('hourly-productivity')" class="bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="widget-handle">
                    <i class="fas fa-grip-vertical text-gray-500"></i>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center">
                        <i class="fas fa-chart-line text-blue-600 mr-3"></i>Hourly Productivity Analysis
                    </h3>
                    <canvas id="hourlyProductivityChart" width="400" height="200"></canvas>
                    <div class="mt-4 grid grid-cols-2 gap-4">
                        <div class="text-center p-3 bg-green-50 rounded-lg">
                            <div class="text-sm text-gray-600">Best Hour</div>
                            <div class="text-lg font-bold text-green-600" id="bestHour">--:-- (0 cars)</div>
                        </div>
                        <div class="text-center p-3 bg-red-50 rounded-lg">
                            <div class="text-sm text-gray-600">Worst Hour</div>
                            <div class="text-lg font-bold text-red-600" id="worstHour">--:-- (0 cars)</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Widget 2: Deck Progress Overview -->
            <div class="widget-container" data-widget-id="deck-progress" data-widget-size="medium">
                <div class="widget-controls">
                    <button onclick="toggleWidget('deck-progress')" class="bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="widget-handle">
                    <i class="fas fa-grip-vertical text-gray-500"></i>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold text-gray-900 flex items-center">
                            <i class="fas fa-layer-group text-purple-600 mr-3"></i>Deck Progress Overview
                        </h3>
                        <button id="editDeckBtn" onclick="toggleDeckEdit()" class="bg-purple-600 hover:bg-purple-700 text-white px-3 py-1 rounded-lg font-semibold transition duration-200 text-sm">
                            <i class="fas fa-edit mr-1"></i>Edit
                        </button>
                    </div>
                    <div id="deckProgressContainer" class="space-y-3">
                        <!-- Deck progress bars will be populated here -->
                    </div>
                    <div id="deckEditForm" class="hidden">
                        <div class="space-y-4">
                            <div class="grid grid-cols-4 gap-2 text-sm font-medium text-gray-700 mb-2">
                                <span>Deck</span>
                                <span>Total</span>
                                <span>Discharged</span>
                                <span>Complete</span>
                            </div>
                            <div id="deckEditInputs" class="space-y-2">
                                <!-- Edit inputs will be populated here -->
                            </div>
                            <div class="flex space-x-2 pt-4">
                                <button onclick="saveDeckChanges()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-semibold transition duration-200">
                                    <i class="fas fa-save mr-1"></i>Save
                                </button>
                                <button onclick="cancelDeckEdit()" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg font-semibold transition duration-200">
                                    <i class="fas fa-times mr-1"></i>Cancel
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Widget 3: Zone Allocation & Distance -->
            <div class="widget-container" data-widget-id="zone-allocation" data-widget-size="small">
                <div class="widget-controls">
                    <button onclick="toggleWidget('zone-allocation')" class="bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="widget-handle">
                    <i class="fas fa-grip-vertical text-gray-500"></i>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-3">
                    <div class="flex justify-between items-center mb-3">
                        <h3 class="text-base font-bold text-gray-900 flex items-center">
                            <i class="fas fa-chart-pie text-orange-600 mr-2 text-sm"></i>Brand Distribution
                        </h3>
                    </div>
                    <div class="mt-2">
                        <h4 class="font-medium text-gray-800 mb-3 text-sm">Brand Distribution</h4>
                        <div class="w-full h-48">
                            <canvas id="brandDistributionChart" width="300" height="200"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Widget 4: Hourly Quantity Tracker -->
            <div class="widget-container" data-widget-id="hourly-tracker" data-widget-size="medium">
                <div class="widget-controls">
                    <button onclick="toggleWidget('hourly-tracker')" class="bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="widget-handle">
                    <i class="fas fa-grip-vertical text-gray-500"></i>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center">
                        <i class="fas fa-clock text-indigo-600 mr-3"></i>Hourly Quantity Tracker
                    </h3>
                    <div class="mb-3">
                        <div class="flex items-center space-x-3 mb-2">
                            <div class="flex-1">
                                <label class="block text-sm font-medium text-gray-700 mb-1">Hour</label>
                                <select id="hourSelect" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                                    <option value="">Select Hour</option>
                                    <option value="1">Hour 1</option>
                                    <option value="2">Hour 2</option>
                                    <option value="3">Hour 3</option>
                                    <option value="4">Hour 4</option>
                                    <option value="5">Hour 5</option>
                                    <option value="6">Hour 6</option>
                                    <option value="7">Hour 7</option>
                                    <option value="8">Hour 8</option>
                                    <option value="9">Hour 9</option>
                                    <option value="10">Hour 10</option>
                                    <option value="11">Hour 11</option>
                                    <option value="12">Hour 12</option>
                                </select>
                            </div>
                            <div class="flex-1">
                                <label class="block text-sm font-medium text-gray-700 mb-1">Quantity</label>
                                <input type="number" id="hourlyQuantity" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-transparent" placeholder="e.g., 150" min="0">
                            </div>
                            <div class="flex-shrink-0 pt-6">
                                <button onclick="addHourlyQuantity()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-2 rounded-lg font-semibold transition duration-200">
                                    <i class="fas fa-plus mr-1"></i>Add
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="space-y-2 max-h-40 overflow-y-auto" id="hourlyQuantityList">
                        <!-- Hourly quantities will be displayed here -->
                    </div>
                    <div class="mt-3 pt-3 border-t border-gray-200">
                        <div class="flex justify-between items-center text-sm">
                            <span class="font-medium text-gray-700">Total Recorded:</span>
                            <span class="font-bold text-indigo-600" id="totalRecorded">0 vehicles</span>
                        </div>
                        <div class="flex justify-between items-center text-sm mt-1">
                            <span class="font-medium text-gray-700">Remaining Autos:</span>
                            <span class="font-bold text-green-600" id="remainingVehicles">0 autos</span>
                        </div>
                        <div class="flex justify-between items-center text-sm mt-1">
                            <span class="font-medium text-gray-700">Average/Hour:</span>
                            <span class="font-bold text-green-600" id="averagePerHour">0 autos/hour</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add Widget Button (shown in customize mode) -->
        <div id="addWidgetPanel" class="bg-white rounded-xl shadow-lg p-6 mb-8 hidden">
            <h3 class="text-xl font-bold text-gray-900 mb-4">Add Widgets</h3>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <button onclick="addWidget('hourly-productivity')" class="p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition duration-200">
                    <i class="fas fa-chart-line text-blue-600 text-2xl mb-2"></i>
                    <div class="text-sm font-medium">Hourly Productivity</div>
                </button>
                <button onclick="addWidget('deck-progress')" class="p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-purple-500 hover:bg-purple-50 transition duration-200">
                    <i class="fas fa-layer-group text-purple-600 text-2xl mb-2"></i>
                    <div class="text-sm font-medium">Deck Progress</div>
                </button>
                <button onclick="addWidget('zone-allocation')" class="p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-orange-500 hover:bg-orange-50 transition duration-200">
                    <i class="fas fa-map-marked-alt text-orange-600 text-2xl mb-2"></i>
                    <div class="text-sm font-medium">Zone Allocation</div>
                </button>
                <button onclick="addWidget('hourly-tracker')" class="p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-indigo-500 hover:bg-indigo-50 transition duration-200">
                    <i class="fas fa-clock text-indigo-600 text-2xl mb-2"></i>
                    <div class="text-sm font-medium">Hourly Tracker</div>
                </button>
            </div>
        </div>

        <!-- Performance Metrics -->
        <div class="grid grid-cols-1 gap-8 mb-8">
            <div class="bg-white rounded-xl shadow-lg p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold text-gray-900">Driver Turnaround Times</h3>
                    <button id="editTurnaroundBtn" onclick="toggleTurnaroundEdit()" class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-lg font-semibold transition duration-200 text-sm">
                        <i class="fas fa-edit mr-1"></i>Edit
                    </button>
                </div>
                <div id="turnaroundDisplay" class="space-y-3">
                    <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                        <span class="text-sm font-medium">Average Turnaround</span>
                        <span class="text-lg font-bold text-blue-600" id="avgTurnaround">No data</span>
                    </div>
                    <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                        <span class="text-sm font-medium">Best Time</span>
                        <span class="text-lg font-bold text-green-600" id="bestTurnaround">No data</span>
                    </div>
                    <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                        <span class="text-sm font-medium">Worst Time</span>
                        <span class="text-lg font-bold text-red-600" id="worstTurnaround">No data</span>
                    </div>
                </div>
                <div id="turnaroundEditForm" class="hidden space-y-4">
                    <div class="grid grid-cols-3 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Average (minutes)</label>
                            <input type="number" id="editAvgTurnaround" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500" step="0.1" min="0">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Best Time (minutes)</label>
                            <input type="number" id="editBestTurnaround" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-green-500" step="0.1" min="0">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Worst Time (minutes)</label>
                            <input type="number" id="editWorstTurnaround" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-red-500" step="0.1" min="0">
                        </div>
                    </div>
                    <div class="flex space-x-2 pt-4">
                        <button onclick="saveTurnaroundChanges()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-semibold transition duration-200">
                            <i class="fas fa-save mr-1"></i>Submit Changes
                        </button>
                        <button onclick="cancelTurnaroundEdit()" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg font-semibold transition duration-200">
                            <i class="fas fa-times mr-1"></i>Cancel
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Detailed Inventory Breakdown -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-gray-900 flex items-center">
                    <i class="fas fa-list-alt text-green-600 mr-3"></i>Detailed Inventory Breakdown
                </h3>
                <button id="editInventoryBtn" onclick="toggleInventoryEdit()" class="bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded-lg font-semibold transition duration-200 text-sm">
                    <i class="fas fa-edit mr-1"></i>Edit Inventory
                </button>
            </div>
            <div id="inventoryDisplay" class="overflow-x-auto">
                <table class="min-w-full table-auto">
                    <thead>
                        <tr class="bg-gray-50">
                            <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">Brand/Type</th>
                            <th class="px-4 py-3 text-right text-sm font-medium text-gray-700">Total</th>
                            <th class="px-4 py-3 text-right text-sm font-medium text-gray-700">Discharged</th>
                            <th class="px-4 py-3 text-right text-sm font-medium text-gray-700">Remaining</th>
                            <th class="px-4 py-3 text-right text-sm font-medium text-gray-700">Progress</th>
                            <th class="px-4 py-3 text-center text-sm font-medium text-gray-700">Zone</th>
                        </tr>
                    </thead>
                    <tbody id="inventoryTable" class="divide-y divide-gray-200">
                        <!-- Inventory data will be populated here -->
                    </tbody>
                </table>
            </div>
            <div id="inventoryEditForm" class="hidden">
                <div class="space-y-4">
                    <div class="grid grid-cols-6 gap-2 text-sm font-medium text-gray-700 mb-2">
                        <span>Brand/Type</span>
                        <span>Total</span>
                        <span>Discharged</span>
                        <span>Zone</span>
                        <span></span>
                        <span></span>
                    </div>
                    <div id="inventoryEditInputs" class="space-y-2">
                        <!-- Edit inputs will be populated here -->
                    </div>
                    <div class="flex justify-between items-center pt-4">
                        <button onclick="addInventoryRow()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-semibold transition duration-200">
                            <i class="fas fa-plus mr-1"></i>Add Brand
                        </button>
                        <div class="flex space-x-2">
                            <button onclick="saveInventoryChanges()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-semibold transition duration-200">
                                <i class="fas fa-save mr-1"></i>Submit Changes
                            </button>
                            <button onclick="cancelInventoryEdit()" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg font-semibold transition duration-200">
                                <i class="fas fa-times mr-1"></i>Cancel
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Document Upload Section -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
            <h2 class="text-xl font-bold text-gray-900 mb-4 flex items-center">
                <i class="fas fa-cloud-upload-alt text-blue-600 mr-3"></i>Upload Maritime Documents
            </h2>
            <div class="flex items-center justify-center w-full">
                <label for="shipDocumentUpload" class="flex flex-col items-center justify-center w-full h-32 border-2 border-blue-300 border-dashed rounded-lg cursor-pointer bg-blue-50 hover:bg-blue-100 transition-colors duration-200">
                    <div class="flex flex-col items-center justify-center pt-5 pb-6">
                        <i class="fas fa-file-upload text-2xl text-blue-500 mb-2"></i>
                        <p class="mb-2 text-sm text-gray-500"><span class="font-semibold">Click to upload</span> or drag and drop</p>
                        <p class="text-xs text-gray-500">PDF, CSV, or TXT files (Max 16MB)</p>
                    </div>
                    <input id="shipDocumentUpload" type="file" class="hidden" accept=".pdf,.csv,.txt" onchange="handleShipFileUpload(event)">
                </label>
            </div>
            <div id="shipUploadStatus" class="mt-4 hidden">
                <div class="flex items-center justify-center">
                    <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mr-3"></div>
                    <span class="text-blue-600">Processing document...</span>
                </div>
            </div>
            <div id="shipUploadSuccess" class="mt-4 hidden">
                <div class="flex items-center justify-center text-green-600">
                    <i class="fas fa-check-circle mr-2"></i>
                    <span>Document processed successfully!</span>
                </div>
            </div>
        </div>

        <!-- Interactive Tools -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
            <!-- Ship Details Card -->
            <div class="lg:col-span-1 bg-white rounded-xl shadow-lg p-6">
                <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
                    <i class="fas fa-ship text-blue-600 mr-3"></i>Vessel Information
                </h2>
                <div id="shipDetails" class="grid grid-cols-1 gap-4">
                    <!-- Ship details will be populated here -->
                </div>
            </div>

            <!-- Estimated Time of Completion Widget -->
            <div class="bg-blue-50 rounded-xl shadow-lg p-6 border-l-4 border-blue-500">
                <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center">
                    <i class="fas fa-clock text-blue-600 mr-3"></i>Estimated Time of Completion
                </h3>

                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Vehicles Remaining</label>
                        <input type="number" id="vehiclesRemaining" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent" 
                               placeholder="Enter remaining vehicles" onchange="calculateETC()">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Current Rate (cars/hour)</label>
                        <input type="number" id="currentRate" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent" 
                               placeholder="Enter current rate" step="0.1" onchange="calculateETC()">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Current Time</label>
                        <input type="time" id="currentTime" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent" 
                               onchange="calculateETC()">
                    </div>

                    <button onclick="calculateETC()" class="w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg font-semibold transition duration-200">
                        Calculate ETC
                    </button>

                    <div id="etcResult" class="mt-4 p-4 bg-white rounded-lg border border-blue-200">
                        <div class="text-sm text-gray-600">Estimated Completion Time</div>
                        <div class="text-2xl font-bold text-blue-600" id="calculatedETC">--:--</div>
                        <div class="text-sm text-gray-600 mt-2">Overall Progress</div>
                        <div class="text-lg font-bold text-green-600" id="calculatedProgress">0%</div>
                    </div>

                </div>
            </div>

            <!-- Port Progress Simulator Widget -->
            <div class="bg-green-50 rounded-xl shadow-lg p-6 border-l-4 border-green-500">
                <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center">
                    <i class="fas fa-chart-line text-green-600 mr-3"></i>Port Progress Simulator
                </h3>

                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">BRV Progress</label>
                        <div class="flex items-center space-x-3">
                            <input type="range" id="brvProgress" min="0" max="904" value="0" class="flex-1" onchange="updatePortProgress()">
                            <span class="text-sm font-medium text-gray-700 w-16" id="brvValue">0/904</span>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ZEE Progress</label>
                        <div class="flex items-center space-x-3">
                            <input type="range" id="zeeProgress" min="0" max="300" value="0" class="flex-1" onchange="updatePortProgress()">
                            <span class="text-sm font-medium text-gray-700 w-16" id="zeeValue">0/300</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                            <div id="zeeBar" class="bg-blue-500 h-2 rounded-full" style="width: 0%"></div>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">SOU Progress</label>
                        <div class="flex items-center space-x-3">
                            <input type="range" id="souProgress" min="0" max="200" value="0" class="flex-1" onchange="updatePortProgress()">
                            <span class="text-sm font-medium text-gray-700 w-16" id="souValue">0/200</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                            <div id="souBar" class="bg-blue-500 h-2 rounded-full" style="width: 0%"></div>
                        </div>
                    </div>

                    <div class="mt-4 p-4 bg-white rounded-lg border border-green-200">
                        <div class="text-sm text-gray-600">Total Progress</div>
                        <div class="text-2xl font-bold text-green-600" id="totalProgress">0.0%</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Photo Management -->
        <div class="bg-white rounded-xl shadow-lg p-6">
            <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center">
                <i class="fas fa-camera text-blue-600 mr-3"></i>Photo Management
            </h3>

            <!-- Photo Upload Area -->
            <div id="photoUploadZone" class="photo-upload-zone rounded-lg p-8 text-center mb-6">
                <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4"></i>
                <p class="text-lg font-medium text-gray-600 mb-2">Drag & drop photos here or click to browse</p>
                <p class="text-sm text-gray-500">Supports JPG, PNG, GIF up to 10MB each</p>
                <input type="file" id="photoInput" multiple accept="image/*" class="hidden">
                <button onclick="document.getElementById('photoInput').click()" class="mt-4 bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-semibold transition duration-200">
                    Select Photos
                </button>
            </div>

            <!-- Photo Gallery -->
            <div id="photoGallery" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
                <!-- Photos will be populated here -->
            </div>
        </div>
    </main>

    <script src="js/ship-info.js"></script>
</body>
</html>
